<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" id="Definitions_1" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="4.0.0">
  <bpmn:message id="Message_002wv9p" name="DebitAuthorizationMessage" />
  <bpmn:message id="Message_05qf6oc" name="NumberOfCandidatesMessage" />
  <bpmn:message id="Message_1smuz1y" name="Message_3qakoc1" />
  <bpmn:collaboration id="Collaboration_15">
    <bpmn:participant id="Participant_17xhagr" processRef="Billing" />
    <bpmn:participant id="Participant_07amvsb" processRef="Process_0j16qw3" />
    <bpmn:messageFlow id="Flow_0131ul7" sourceRef="Activity_1nxu2ix" targetRef="Participant_07amvsb" />
    <bpmn:messageFlow id="Flow_1u91d0t" sourceRef="Activity_1qavcug" targetRef="Participant_07amvsb" />
    <bpmn:messageFlow id="Flow_0ep5ucg" sourceRef="Activity_13266wa" targetRef="Participant_07amvsb" />
    <bpmn:messageFlow id="Flow_01yvnlc" sourceRef="ServiceTask_Logger" targetRef="Participant_07amvsb" />
  </bpmn:collaboration>
  <bpmn:process id="Billing" name="Billing" isExecutable="true">
    <bpmn:startEvent id="StartEvent" name="candidates placed">
      <bpmn:outgoing>Flow_1t1trmd</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_0603z6u" messageRef="Message_05qf6oc" />
    </bpmn:startEvent>
    <bpmn:sendTask id="Activity_1nxu2ix" name="Send invoice" camunda:class="org.example.delegate.SendInvoiceDelegate">
      <bpmn:incoming>Flow_0jhrz4m</bpmn:incoming>
      <bpmn:outgoing>Flow_0n0gr1m</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:eventBasedGateway id="Gateway_1p7jdfw" name="Gateway">
      <bpmn:incoming>Flow_0n0gr1m</bpmn:incoming>
      <bpmn:incoming>Flow_1edk9k2</bpmn:incoming>
      <bpmn:outgoing>Flow_1rtbmxq</bpmn:outgoing>
      <bpmn:outgoing>Flow_1u78t0u</bpmn:outgoing>
    </bpmn:eventBasedGateway>
    <bpmn:intermediateCatchEvent id="Event_0lpshe9">
      <bpmn:incoming>Flow_1rtbmxq</bpmn:incoming>
      <bpmn:outgoing>Flow_0b5qbag</bpmn:outgoing>
      <bpmn:messageEventDefinition id="MessageEventDefinition_1kma4q6" messageRef="Message_002wv9p" />
    </bpmn:intermediateCatchEvent>
    <bpmn:intermediateCatchEvent id="Event_0jaqtpg" name="No debit authorization received">
      <bpmn:incoming>Flow_1u78t0u</bpmn:incoming>
      <bpmn:outgoing>Flow_1n8ciqr</bpmn:outgoing>
      <bpmn:timerEventDefinition id="TimerEventDefinition_0mdncd5">
        <bpmn:timeDuration xsi:type="bpmn:tFormalExpression">PT1M</bpmn:timeDuration>
      </bpmn:timerEventDefinition>
    </bpmn:intermediateCatchEvent>
    <bpmn:exclusiveGateway id="Gateway_1arwwmo" name="Are 3 dunns sent?">
      <bpmn:incoming>Flow_1n8ciqr</bpmn:incoming>
      <bpmn:outgoing>Flow_1wpridl</bpmn:outgoing>
      <bpmn:outgoing>Flow_1gz5n60</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Activity_1hlg9iw" name="Determine placement status" camunda:class="org.example.delegate.DeterminePlacementStatusDelegate">
      <bpmn:incoming>Flow_045w6ar</bpmn:incoming>
      <bpmn:outgoing>Flow_1i5sb5m</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="Activity_1qavcug" name="Take legal action" camunda:class="org.example.delegate.TakeLegalActionDelegate">
      <bpmn:incoming>Flow_1wpridl</bpmn:incoming>
      <bpmn:outgoing>Flow_0iasomx</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:sendTask id="Activity_13266wa" name="Send dunn" camunda:class="org.example.delegate.SendDunnDelegate">
      <bpmn:incoming>Flow_1gz5n60</bpmn:incoming>
      <bpmn:outgoing>Flow_1edk9k2</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="Event_1nxg1vd">
      <bpmn:incoming>Flow_0iasomx</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0jhrz4m" sourceRef="Activity_1v265dh" targetRef="Activity_1nxu2ix" />
    <bpmn:sequenceFlow id="Flow_0n0gr1m" sourceRef="Activity_1nxu2ix" targetRef="Gateway_1p7jdfw" />
    <bpmn:sequenceFlow id="Flow_1edk9k2" sourceRef="Activity_13266wa" targetRef="Gateway_1p7jdfw" />
    <bpmn:sequenceFlow id="Flow_1u78t0u" sourceRef="Gateway_1p7jdfw" targetRef="Event_0jaqtpg" />
    <bpmn:sequenceFlow id="Flow_1rtbmxq" name="Debit authorization received" sourceRef="Gateway_1p7jdfw" targetRef="Event_0lpshe9" />
    <bpmn:sequenceFlow id="Flow_0b5qbag" sourceRef="Event_0lpshe9" targetRef="ServiceTask_Logger" />
    <bpmn:sequenceFlow id="Flow_1n8ciqr" sourceRef="Event_0jaqtpg" targetRef="Gateway_1arwwmo" />
    <bpmn:sequenceFlow id="Flow_1gz5n60" name="3rd dunn not sent" sourceRef="Gateway_1arwwmo" targetRef="Activity_13266wa">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{number_of_dunns != 3}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1wpridl" name="3rd dunn sent" sourceRef="Gateway_1arwwmo" targetRef="Activity_1qavcug">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{number_of_dunns==3}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_045w6ar" sourceRef="ServiceTask_Logger" targetRef="Activity_1hlg9iw" />
    <bpmn:sequenceFlow id="Flow_0iasomx" sourceRef="Activity_1qavcug" targetRef="Event_1nxg1vd" />
    <bpmn:sequenceFlow id="Flow_1t1trmd" sourceRef="StartEvent" targetRef="Activity_11n4xb8" />
    <bpmn:serviceTask id="Activity_11n4xb8" name="set Testing" camunda:class="org.example.delegate.setTesting">
      <bpmn:incoming>Flow_1t1trmd</bpmn:incoming>
      <bpmn:outgoing>Flow_05qomt5</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="Flow_05qomt5" sourceRef="Activity_11n4xb8" targetRef="Activity_1v265dh" />
    <bpmn:serviceTask id="Activity_1v265dh" name="Prepare invoice" camunda:class="org.example.delegate.PrepareInvoiceDelegate">
      <bpmn:incoming>Flow_05qomt5</bpmn:incoming>
      <bpmn:outgoing>Flow_0jhrz4m</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="Gateway_0xvknp5">
      <bpmn:incoming>Flow_1i5sb5m</bpmn:incoming>
      <bpmn:outgoing>Flow_0q5c2va</bpmn:outgoing>
      <bpmn:outgoing>Flow_0ac1xbw</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="Flow_1i5sb5m" sourceRef="Activity_1hlg9iw" targetRef="Gateway_0xvknp5" />
    <bpmn:endEvent id="Event_018l1s1">
      <bpmn:incoming>Flow_0q5c2va</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0q5c2va" sourceRef="Gateway_0xvknp5" targetRef="Event_018l1s1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${placementFin}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="Event_0mu70om">
      <bpmn:incoming>Flow_0ac1xbw</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_0ac1xbw" sourceRef="Gateway_0xvknp5" targetRef="Event_0mu70om">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${not placementFin}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sendTask id="ServiceTask_Logger" name="Debit collection" camunda:class="org.example.delegate.DebitCollectionDelegate">
      <bpmn:incoming>Flow_0b5qbag</bpmn:incoming>
      <bpmn:outgoing>Flow_045w6ar</bpmn:outgoing>
    </bpmn:sendTask>
  </bpmn:process>
  <bpmn:process id="Process_0j16qw3" isExecutable="false" />
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_15">
      <bpmndi:BPMNShape id="Participant_17xhagr_di" bpmnElement="Participant_17xhagr" isHorizontal="true">
        <dc:Bounds x="160" y="160" width="1560" height="600" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0ac1xbw_di" bpmnElement="Flow_0ac1xbw">
        <di:waypoint x="1390" y="355" />
        <di:waypoint x="1390" y="440" />
        <di:waypoint x="1522" y="440" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0q5c2va_di" bpmnElement="Flow_0q5c2va">
        <di:waypoint x="1415" y="330" />
        <di:waypoint x="1522" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1i5sb5m_di" bpmnElement="Flow_1i5sb5m">
        <di:waypoint x="1267" y="330" />
        <di:waypoint x="1365" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_05qomt5_di" bpmnElement="Flow_05qomt5">
        <di:waypoint x="400" y="500" />
        <di:waypoint x="460" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1t1trmd_di" bpmnElement="Flow_1t1trmd">
        <di:waypoint x="248" y="500" />
        <di:waypoint x="300" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0iasomx_di" bpmnElement="Flow_0iasomx">
        <di:waypoint x="1307" y="500" />
        <di:waypoint x="1409" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_045w6ar_di" bpmnElement="Flow_045w6ar">
        <di:waypoint x="1077" y="330" />
        <di:waypoint x="1167" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1wpridl_di" bpmnElement="Flow_1wpridl">
        <di:waypoint x="1112" y="500" />
        <di:waypoint x="1207" y="500" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1126" y="482" width="69" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gz5n60_di" bpmnElement="Flow_1gz5n60">
        <di:waypoint x="1087" y="525" />
        <di:waypoint x="1087" y="610" />
        <di:waypoint x="1207" y="610" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1094" y="583" width="87" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1n8ciqr_di" bpmnElement="Flow_1n8ciqr">
        <di:waypoint x="975" y="500" />
        <di:waypoint x="1062" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0b5qbag_di" bpmnElement="Flow_0b5qbag">
        <di:waypoint x="845" y="330" />
        <di:waypoint x="977" y="330" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1rtbmxq_di" bpmnElement="Flow_1rtbmxq">
        <di:waypoint x="827" y="475" />
        <di:waypoint x="827" y="348" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="745" y="290" width="63" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1u78t0u_di" bpmnElement="Flow_1u78t0u">
        <di:waypoint x="852" y="500" />
        <di:waypoint x="939" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1edk9k2_di" bpmnElement="Flow_1edk9k2">
        <di:waypoint x="1257" y="650" />
        <di:waypoint x="1257" y="680" />
        <di:waypoint x="827" y="680" />
        <di:waypoint x="827" y="525" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0n0gr1m_di" bpmnElement="Flow_0n0gr1m">
        <di:waypoint x="737" y="500" />
        <di:waypoint x="802" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0jhrz4m_di" bpmnElement="Flow_0jhrz4m">
        <di:waypoint x="560" y="500" />
        <di:waypoint x="637" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Event_0xtgb9t_di" bpmnElement="StartEvent">
        <dc:Bounds x="212" y="482" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="185" y="463" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1svpikw_di" bpmnElement="Activity_1nxu2ix">
        <dc:Bounds x="637" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_03fxnad_di" bpmnElement="Gateway_1p7jdfw">
        <dc:Bounds x="802" y="475" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="805" y="532" width="44" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1uofx1d_di" bpmnElement="Event_0lpshe9">
        <dc:Bounds x="809" y="312" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1vi0wrw_di" bpmnElement="Event_0jaqtpg">
        <dc:Bounds x="939" y="482" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="926" y="525" width="63" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1arwwmo_di" bpmnElement="Gateway_1arwwmo" isMarkerVisible="true">
        <dc:Bounds x="1062" y="475" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1044" y="445" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0m71m3d_di" bpmnElement="Activity_1hlg9iw">
        <dc:Bounds x="1167" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19dyhv5_di" bpmnElement="Activity_1qavcug">
        <dc:Bounds x="1207" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1vvx4zq_di" bpmnElement="Activity_13266wa">
        <dc:Bounds x="1207" y="570" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1nxg1vd_di" bpmnElement="Event_1nxg1vd">
        <dc:Bounds x="1409" y="482" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1u6pk97_di" bpmnElement="Activity_11n4xb8">
        <dc:Bounds x="300" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0gyemos_di" bpmnElement="Activity_1v265dh">
        <dc:Bounds x="460" y="460" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0xvknp5_di" bpmnElement="Gateway_0xvknp5" isMarkerVisible="true">
        <dc:Bounds x="1365" y="305" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_018l1s1_di" bpmnElement="Event_018l1s1">
        <dc:Bounds x="1522" y="312" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_0mu70om_di" bpmnElement="Event_0mu70om">
        <dc:Bounds x="1522" y="422" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1sustym_di" bpmnElement="ServiceTask_Logger">
        <dc:Bounds x="977" y="290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Participant_07amvsb_di" bpmnElement="Participant_07amvsb" isHorizontal="true">
        <dc:Bounds x="160" y="80" width="1560" height="150" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0131ul7_di" bpmnElement="Flow_0131ul7">
        <di:waypoint x="687" y="460" />
        <di:waypoint x="687" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1u91d0t_di" bpmnElement="Flow_1u91d0t">
        <di:waypoint x="1257" y="460" />
        <di:waypoint x="1257" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0ep5ucg_di" bpmnElement="Flow_0ep5ucg">
        <di:waypoint x="1237" y="570" />
        <di:waypoint x="1237" y="230" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01yvnlc_di" bpmnElement="Flow_01yvnlc">
        <di:waypoint x="1027" y="290" />
        <di:waypoint x="1027" y="230" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
